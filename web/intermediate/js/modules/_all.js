var Note=function(c,d){var a=this;a.title=ko.observable();a.content=ko.observable();a.createdOn=ko.observable();a.isFavourited=ko.observable();a.isStarred=ko.observable();Note.prototype.initialize=function(b,c){a.setTitle(b);a.setContent(c);a.createdOn((new Date).toISOString());a.isFavourited(!1);a.isStarred(!1);debug.info("Successfully created note!",a)};Note.prototype.setTitle=function(b){$.trim(b)?a.title($.trim(b)):a.title("No title")};Note.prototype.setContent=function(b){$.trim(b)?a.content($.trim(b)):
a.content("No content")};a.toggleStar=function(){a.isStarred(!a.isStarred())};a.initialize(c,d)};
var Notebook=function(){var a=this;a.notes=ko.observableArray();a.isEmpty=ko.observable(!0);a.initialize=function(){a.updateIsEmpty();debug.info("Successfully created notebook!",a)};a.addNote=function(){if($("#createNewNoteForm").valid()){var b=$("#noteTitle").val(),c=$("#noteContent").val(),b=new Note(b,c);debug.info("Adding new note...",b);a.notes(a.notes().reverse());a.notes.push(b);a.notes(a.notes().reverse());$("#noteTitle").val("");$("#noteContent").val("")}a.updateIsEmpty()};a.removeNote=function(b){a.notes.remove(b);
a.updateIsEmpty()};a.postProcess=function(){$("time.timeago").timeago()};a.focusCreateNote=function(){$("#createNewNoteDiv").collapse("show");$("#noteTitle").focus()};a.updateIsEmpty=function(){a.notes().length==0?a.isEmpty(!0):a.isEmpty(!1)};a.initialize()};
var Storage=function(){var a=this;a.STORE_KEY="NOTEBOOK_APP_DATA";a.model=null;a.loadModel=function(){debug.info("Attempting to load from localstorage...");if(Modernizr.localstorage){debug.log("Checking for previously stored data...");var b=localStorage.getItem(a.STORE_KEY);b?(debug.info("Found previously stored data! Applying Knockout mapping..."),a.model=ko.mapping.fromJS(b,{ignore:["addNote","removeNote"]})):(debug.warn("No previously stored data found."),a.model=new Notebook(a))}else debug.warn("No localstorage capability found."),
a.model=new Notebook(a);return a.model};a.storeModel=function(){debug.info("Attempting to store to localstorage...");Modernizr.localstorage?localStorage.setItem(a.STORE_KEY,ko.mapping.toJS(a.model)):debug.warn("No localstorage capability found.")}};
